<div class="task-list-wrapper">
  <h2>–í–∞—à–∏ –∑–∞–¥–∞—á–∏</h2>

  <div class="quote">
    <blockquote>
      ‚Äú–î–µ–ª–∞–π —Å–µ–≥–æ–¥–Ω—è —Ç–æ, —á—Ç–æ –¥—Ä—É–≥–∏–µ –Ω–µ —Ö–æ—Ç—è—Ç ‚Äî –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—à—å –∂–∏—Ç—å —Ç–∞–∫, –∫–∞–∫ –¥—Ä—É–≥–∏–µ –Ω–µ –º–æ–≥—É—Ç.‚Äù
    </blockquote>
  </div>

  <mat-progress-bar
    mode="determinate"
    [value]="completedPercentage"
    color="accent"
  ></mat-progress-bar>

  <div class="header-actions">
    <button mat-raised-button color="accent" (click)="openTaskForm()">
      <mat-icon>add</mat-icon>
      –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
    </button>
  </div>

  <div class="task-grid">
    <mat-card
      *ngFor="let task of tasks"
      class="task-card"
      [ngClass]="{ done: task.status === 'done' }"
    >
      <mat-card-header>
        <mat-card-title>{{ task.title }}</mat-card-title>
        <mat-chip
          [color]="task.status === 'done' ? 'primary' : 'warn'"
          selected
          class="status-chip"
        >
          {{ task.status === 'done' ? '‚úî –í—ã–ø–æ–ª–Ω–µ–Ω–∞' : 'üïì –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞' }}
        </mat-chip>
      </mat-card-header>

      <mat-card-content>
        <p class="task-desc">{{ task.description || '–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è' }}</p>
      </mat-card-content>

      <mat-card-actions align="end">
        <button
          mat-icon-button
          color="primary"
          (click)="viewTask(task.id)"
          matTooltip="–ü–æ–¥—Ä–æ–±–Ω–µ–µ"
        >
          <mat-icon>open_in_new</mat-icon>
        </button>
        <button
          mat-icon-button
          color="warn"
          (click)="deleteTask(task.id)"
          matTooltip="–£–¥–∞–ª–∏—Ç—å"
        >
          <mat-icon>delete</mat-icon>
        </button>
        <button
          mat-icon-button
          color="accent"
          (click)="updateStatus(task.id, task.status)"
          matTooltip="–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å"
        >
          <mat-icon>check_circle</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <app-task-form *ngIf="showForm" (taskAdded)="onTaskAdded($event)" (closeForm)="showForm = false"></app-task-form>
</div>