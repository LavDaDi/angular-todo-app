<div class="task-detail-wrapper" *ngIf="task">
  <mat-card class="task-detail-card">
    <mat-card-header>
      <mat-card-title>
        <ng-container *ngIf="!editMode; else editTitle">
          {{ task.title }}
        </ng-container>
        <ng-template #editTitle>
          <input [(ngModel)]="task.title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏" class="edit-title" />
        </ng-template>
      </mat-card-title>

      <mat-chip [color]="task.status === 'done' ? 'primary' : 'warn'" selected>
        {{ task.status === 'done' ? '‚úîÔ∏è –í—ã–ø–æ–ª–Ω–µ–Ω–∞' : 'üïì –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞' }}
      </mat-chip>
    </mat-card-header>

    <mat-card-content>
      <ng-container *ngIf="!editMode; else editDesc">
        <p class="task-desc">
          {{ task.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è' }}
        </p>
      </ng-container>
      <ng-template #editDesc>
        <textarea [(ngModel)]="task.description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" class="edit-desc"></textarea>
      </ng-template>
    </mat-card-content>

    <mat-card-actions>
      <button mat-button color="primary" (click)="goBack()">–ù–∞–∑–∞–¥</button>

      <button mat-button color="accent" *ngIf="!editMode" (click)="toggleStatus()">
        {{ task.status === 'done' ? '–°–¥–µ–ª–∞—Ç—å –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π' : '–ü–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é' }}
      </button>

      <button mat-button color="accent" *ngIf="!editMode" (click)="enableEdit()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>

      <button mat-button color="primary" *ngIf="editMode" (click)="updateTask()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button mat-button color="warn" *ngIf="editMode" (click)="cancelEdit()">–û—Ç–º–µ–Ω–∞</button>
    </mat-card-actions>
  </mat-card>
</div>
